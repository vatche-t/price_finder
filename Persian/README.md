# جمع‌آوری قیمت‌ها از سایت  و آپلود به وردپرس

این اسکریپت پایتون قیمت‌ها را از یک آدرس وب مشخص جمع‌آوری کرده و آن‌ها را به سایت وردپرس آپلود می‌کند. این اسکریپت از کتابخانه requests برای درخواست‌های HTTP و از کتابخانه loguru برای ورود به سیستم استفاده می‌کند و تنظیمات آدرس وب را در فایل پیکربندی (config.py) ذخیره می‌کند.

## چگونگی اجرا
- مخزن را در دستگاه محلی خود کلون کنید.
- 
محیط مجازی را ایجاد کنید:
```bash
python3.10 -m venv .venv
source .venv/bin/activate
```
همچنین، اسکریپت update_debs.sh را برای بروزرسانی بسته‌های Debian مورد نیاز اجرا کنید. دستور زیر را اجرا کنید:

```bash
./scripts/update_debs.sh
```
پکیج‌های پایتون مورد نیاز را با استفاده از pip نصب کنید:
```linux
pip install -r requirements.txt
```
## استفاده
اسکریپت را با استفاده از دستور زیر اجرا کنید:
```css
python main.py
```
اسکریپت به طور مداوم قیمت‌ها را هر ثانیه از آدرس وب مشخص شده جمع‌آوری کرده و آن‌ها را در سایت وردپرس خود آپلود می‌کند. این اسکریپت عملیات و هر خطایی که بروز می‌دهد را در فایل price_scraping_logs.log ثبت می‌کند.

## پیکربندی
شما می‌توانید اسکریپت را با تغییر متغیرهای زیر پیکربندی کنید:

- URL: آدرس وب را در فایل config.py به آدرس مورد نظر برای جمع‌آوری قیمت‌ها بروزرسانی کنید.

- WordPress Integration: تابع upload_to_wordpress را تغییر دهید تا با تنظیمات وردپرس خود سازگار شود. این شامل استفاده از API وردپرس، پلاگین یا روش دیگری برای آپلود قیمت‌ها به سایت وردپرس شما می‌شود.

- Logging: تنظیمات نام فایل لاگ، تنظیمات چرخش، فشرده‌سازی و قالب لاگ را در عبارت logger.add تغییر دهید تا با ترجیحات شما هماهنگ شود.

## لاگ‌گیری
اسکریپت از کتابخانه Loguru برای لاگ‌گیری استفاده می‌کند. فایل لاگ (app.log) در همان دایرکتوری اسکریپت ایجاد می‌شود. هر هفته یک بار چرخش می‌کند و سطح لاگ را به INFO تنظیم می‌کند. در صورت نیاز می‌توانید تنظیمات لاگ را در اسکریپت تغییر دهید.

+ فایل هر 20 ثانیه (به صورت پیش‌فرض) اجرا خواهد شد.